---
name: regex-helper
description: 正则表达式编写和解释。当用户要求写正则、解释正则、匹配文本模式时使用。
allowed-tools: Read, Bash
---

# 正则表达式助手

## 基础语法

### 字符匹配
| 模式 | 说明 | 示例 |
|------|------|------|
| `.` | 任意单字符 | `a.c` → abc, a1c |
| `\d` | 数字 [0-9] | `\d{3}` → 123 |
| `\D` | 非数字 | `\D+` → abc |
| `\w` | 单词字符 [a-zA-Z0-9_] | `\w+` → hello_123 |
| `\W` | 非单词字符 | `\W` → @, # |
| `\s` | 空白字符 | `a\sb` → a b |
| `\S` | 非空白字符 | `\S+` → hello |

### 量词
| 模式 | 说明 | 示例 |
|------|------|------|
| `*` | 0 或多个 | `ab*c` → ac, abc, abbc |
| `+` | 1 或多个 | `ab+c` → abc, abbc |
| `?` | 0 或 1 个 | `colou?r` → color, colour |
| `{n}` | 恰好 n 个 | `\d{4}` → 2024 |
| `{n,}` | 至少 n 个 | `\d{2,}` → 12, 123 |
| `{n,m}` | n 到 m 个 | `\d{2,4}` → 12, 1234 |

### 位置锚点
| 模式 | 说明 | 示例 |
|------|------|------|
| `^` | 行首 | `^Hello` |
| `$` | 行尾 | `world$` |
| `\b` | 单词边界 | `\bword\b` |
| `\B` | 非单词边界 | `\Bword\B` |

### 分组与引用
| 模式 | 说明 | 示例 |
|------|------|------|
| `(...)` | 捕获分组 | `(ab)+` → abab |
| `(?:...)` | 非捕获分组 | `(?:ab)+` |
| `\1` | 反向引用 | `(\w)\1` → aa, bb |
| `(?<name>...)` | 命名分组 | `(?<year>\d{4})` |

### 字符类
| 模式 | 说明 | 示例 |
|------|------|------|
| `[abc]` | a, b 或 c | `[aeiou]` |
| `[^abc]` | 非 a, b, c | `[^0-9]` |
| `[a-z]` | a 到 z | `[A-Za-z]` |
| `[0-9]` | 0 到 9 | `[0-9]+` |

### 断言（环视）
| 模式 | 说明 | 示例 |
|------|------|------|
| `(?=...)` | 正向先行 | `\d+(?=px)` → 100px 中的 100 |
| `(?!...)` | 负向先行 | `\d+(?!px)` → 100em 中的 100 |
| `(?<=...)` | 正向后行 | `(?<=\$)\d+` → $100 中的 100 |
| `(?<!...)` | 负向后行 | `(?<!\$)\d+` → 排除 $ 开头的数字 |

## 常用正则表达式

### 邮箱
```regex
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
```

### 手机号（中国）
```regex
^1[3-9]\d{9}$
```

### URL
```regex
^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$
```

### IPv4 地址
```regex
^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$
```

### 日期 (YYYY-MM-DD)
```regex
^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$
```

### 时间 (HH:MM:SS)
```regex
^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$
```

### 密码强度（至少8位，包含大小写字母和数字）
```regex
^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$
```

### 中文字符
```regex
[\u4e00-\u9fa5]+
```

### HTML 标签
```regex
<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)
```

### 提取引号内容
```regex
["']([^"']+)["']
```

## 代码示例

### JavaScript
```javascript
// 测试匹配
const regex = /^\d{4}-\d{2}-\d{2}$/;
regex.test('2024-01-15');  // true

// 提取匹配
const str = 'Price: $100, Discount: $20';
const matches = str.match(/\$(\d+)/g);  // ['$100', '$20']

// 替换
str.replace(/\$(\d+)/g, '￥$1');  // 'Price: ￥100, Discount: ￥20'

// 命名分组
const dateRegex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const { groups } = '2024-01-15'.match(dateRegex);
// { year: '2024', month: '01', day: '15' }
```

### Python
```python
import re

# 测试匹配
pattern = r'^\d{4}-\d{2}-\d{2}$'
re.match(pattern, '2024-01-15')  # Match object

# 查找所有
text = 'Price: $100, Discount: $20'
re.findall(r'\$(\d+)', text)  # ['100', '20']

# 替换
re.sub(r'\$(\d+)', r'￥\1', text)  # 'Price: ￥100, Discount: ￥20'

# 编译正则（多次使用时）
compiled = re.compile(r'\d+')
compiled.findall('abc123def456')  # ['123', '456']
```

## 输出格式

```markdown
## 正则表达式

**模式**: `正则表达式`

**解释**:
- `部分1` - 解释
- `部分2` - 解释
- ...

**匹配示例**:
- ✅ `匹配的字符串`
- ❌ `不匹配的字符串`

**代码示例**:
```javascript
// 使用示例
```
```

---
name: autonomous-dev
description: 自主开发模式。让 AI 自主完成完整开发任务，无需每步确认。当用户要求"自主开发"、"自动完成"、"全自动"时使用。
allowed-tools: Read, Write, Edit, Bash, Grep, Glob, Task
related-skills: auto-code-pipeline, auto-fix-loop, code-reviewer, test-generator
---

# 自主开发模式

让 AI 自主完成从需求分析到代码提交的完整开发任务。

## 核心原则

```
1. 自主决策 - 无需每步确认，自主判断下一步行动
2. 错误恢复 - 遇到错误自动尝试修复，最多重试 3 次
3. 完整闭环 - 从需求到提交完整执行
4. 进度汇报 - 每个阶段完成后简要汇报
```

## 执行流程

```
需求分析 → 方案设计 → 代码实现 → 测试验证 → 代码审查 → 提交代码
    ↓          ↓          ↓          ↓          ↓
   自动       自动       自动       自动       自动
   推进       推进       推进       推进       推进
```

## 阶段定义

### 阶段 1：需求分析（自动）
```
输入：用户的任务描述
执行：
  - 分析任务目标
  - 识别涉及的文件和模块
  - 确定技术方案
输出：简要方案摘要
下一步：自动进入阶段 2
```

### 阶段 2：代码实现（自动）
```
执行：
  - 创建/修改必要的文件
  - 遵循项目现有代码风格
  - 添加必要的注释
输出：修改的文件列表
下一步：自动进入阶段 3
```

### 阶段 3：测试验证（自动）
```
执行：
  - 生成或更新测试用例
  - 运行测试命令
  - 如果失败，自动修复后重试（最多 3 次）
输出：测试结果
下一步：测试通过后自动进入阶段 4
```

### 阶段 4：代码审查（自动）
```
执行：
  - 检查代码质量
  - 检查潜在 bug
  - 检查安全问题
  - 如有问题，自动修复
输出：审查结果
下一步：自动进入阶段 5
```

### 阶段 5：提交代码（自动）
```
执行：
  - 生成规范的 commit message
  - 执行 git add 和 commit
  - 不自动 push（需用户确认）
输出：提交信息
完成：汇报整体结果
```

## 自动继续规则

```
✅ 每个阶段完成后，立即执行下一阶段
✅ 遇到可自动修复的问题，修复后继续
✅ 测试/lint 失败，自动修复后重试
❌ 遇到以下情况暂停并询问用户：
   - 需求不明确
   - 多种方案需要选择
   - 连续 3 次修复失败
   - 涉及删除大量代码
   - 涉及敏感操作（如数据库迁移）
```

## 进度汇报格式

```
[阶段 X/5] ✅ {阶段名称}完成
  - {关键信息 1}
  - {关键信息 2}
→ 自动进入下一阶段...
```

## 最终汇报格式

```
═══════════════════════════════════════
✅ 自主开发任务完成

📋 任务摘要：{一句话描述}

📁 修改文件：
  - {文件 1}：{修改说明}
  - {文件 2}：{修改说明}

🧪 测试结果：{X} 个测试通过

📝 提交信息：
  {commit message}

⚠️  注意事项：
  - {如有需要用户注意的事项}
═══════════════════════════════════════
```

## 触发方式

- "自主开发 {任务描述}"
- "自动完成 {任务描述}"
- "全自动模式 {任务描述}"
- "autonomous mode: {任务描述}"

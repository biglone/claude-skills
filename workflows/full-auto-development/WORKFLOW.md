---
name: full-auto-development
description: 全自动开发完整工作流。从一句话需求自动生成需求文档、任务列表，经用户确认后自动完成开发。当用户说"全自动开发：<需求描述>"、"完整自动化流程"、"从需求到代码"时使用。与 autonomous-dev 的区别：本工作流包含需求分析阶段，autonomous-dev 只负责代码实现阶段。
skills:
  - requirements-doc
  - task-planner
  - autonomous-dev
  - auto-code-pipeline
  - code-reviewer
---

# 全自动开发工作流

从简单需求到代码实现的完整自动化流程，在开发前包含人工确认环节确保方向正确。

## 工作流概览

```
┌──────────────────────────────────────────────────────────┐
│ 阶段 1: 需求分析 (自动)                                   │
│  • 理解需求                                               │
│  • 生成需求文档                                           │
│  • 拆解任务                                               │
└────────────────────┬─────────────────────────────────────┘
                     ↓
┌──────────────────────────────────────────────────────────┐
│ 确认检查点 (人工)                                         │
│  • 审查需求文档                                           │
│  • 确认功能模块                                           │
│  • 验证任务列表                                           │
└────────────────────┬─────────────────────────────────────┘
                     ↓
          用户确认? [是/否/修改]
                     │
        ┌────────────┼────────────┐
        │            │            │
       是           修改          否
        │            │            │
        ↓            ↓            ↓
┌───────────┐  ┌──────────┐  ┌───────┐
│ 继续开发  │  │ 调整文档 │  │ 终止  │
└─────┬─────┘  └────┬─────┘  └───────┘
      │             │
      │             └──> 返回确认检查点
      ↓
┌──────────────────────────────────────────────────────────┐
│ 阶段 2: 自动化开发 (自动)                                 │
│  • 代码实现                                               │
│  • 自动测试                                               │
│  • 错误修复                                               │
│  • 代码审查                                               │
└────────────────────┬─────────────────────────────────────┘
                     ↓
┌──────────────────────────────────────────────────────────┐
│ 阶段 3: 完成汇报 (自动)                                   │
│  • 展示完成的功能                                         │
│  • 列出文件变更                                           │
│  • 生成提交信息                                           │
└──────────────────────────────────────────────────────────┘
```

## 详细流程

### 阶段 1: 需求分析（自动执行）

**使用 Skill**: `requirements-doc`

**步骤 1.1**: 需求理解
```
输入：用户的简单需求描述
  例如："实现用户登录功能"

执行：
  1. 分析需求的核心目标
  2. 识别关键功能点
  3. 检测项目现有技术栈
  4. 分析可能的技术方案
```

**步骤 1.2**: 生成需求文档
```
生成 REQUIREMENTS.md：
  • 功能概述
  • 用户故事
  • 验收标准
  • 功能模块划分（前端/后端/数据库）
  • 技术方案建议
  • 接口设计
  • 数据模型
  • 风险识别
```

**步骤 1.3**: 任务拆解
```
生成 TASK_LIST.md：
  • 分阶段的任务列表
  • 每个任务的优先级
  • 任务依赖关系
  • 预估工作量
```

**步骤 1.4**: 生成进度文件
```
创建 .claude-fulldev.json：
  {
    "feature": "功能名称",
    "phase": "requirements",
    "status": "waiting_confirmation",
    "files": {
      "requirements": "REQUIREMENTS.md",
      "tasks": "TASK_LIST.md"
    }
  }
```

---

### 确认检查点（人工介入）

**展示格式**：
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 需求文档已生成

功能概述：
  [一句话描述功能]

功能模块划分：
  📱 前端模块：
    • [模块1]: [功能描述]
    • [模块2]: [功能描述]

  🔧 后端模块：
    • [模块1]: [功能描述]
    • [模块2]: [功能描述]

  🗄️  数据库模块：
    • [表1]: [字段说明]
    • [表2]: [字段说明]

任务拆解：
  阶段1 (准备): X 个任务
  阶段2 (开发): X 个任务
  阶段3 (测试): X 个任务
  阶段4 (发布): X 个任务

  总计: X 个任务
  预估工作量: [时间]

技术方案：
  • [关键技术点1]
  • [关键技术点2]

风险提示：
  ⚠️  [风险1]
  ⚠️  [风险2]

文档位置：
  📄 REQUIREMENTS.md - 完整需求文档
  📋 TASK_LIST.md - 详细任务清单

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请审查以上内容，然后选择：

  ✅ "继续开发" / "开始开发" / "确认"
     → 开始自动化开发阶段

  ✏️  "修改 [章节]" / "调整 [部分]"
     → 重新生成指定章节
     支持修改：功能模块、任务列表、技术方案等

  📖 "详细说明 [部分]"
     → 展开某个部分的详细信息

  ❌ "取消" / "终止"
     → 终止流程，清理生成的文件

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**交互处理**：

| 用户输入 | AI 响应 |
|---------|---------|
| "继续开发" / "开始开发" / "确认" / "approved" | 更新进度状态，进入阶段 2 |
| "修改功能模块" | 重新生成功能模块部分，再次展示确认 |
| "修改任务列表" | 重新拆解任务，再次展示确认 |
| "调整技术方案" | 重新分析技术方案，再次展示确认 |
| "详细说明技术方案" | 展开技术方案章节的详细内容 |
| "详细说明任务" | 显示 TASK_LIST.md 的完整内容 |
| "取消" / "终止" | 删除生成的文件和进度记录 |

---

### 阶段 2: 自动化开发（用户确认后）

**使用 Skill**: `autonomous-dev`

**步骤 2.1**: 更新进度
```
更新 .claude-fulldev.json：
  {
    "phase": "development",
    "status": "in_progress",
    "user_confirmed": true,
    "confirmed_at": "2024-01-01T10:00:00Z"
  }
```

**步骤 2.2**: 开始自动开发
```
[阶段 1/5] 📋 读取任务列表
  ✅ 从 TASK_LIST.md 加载任务
  ✅ 识别优先级和依赖关系

[阶段 2/5] 💻 代码实现
  🔄 任务 1: [任务描述]
  ✅ 任务 1 完成
  🔄 任务 2: [任务描述]
  ✅ 任务 2 完成
  ...

[阶段 3/5] 🧪 测试验证
  🔄 运行测试套件...
  ⚠️  2 个测试失败
  🔧 自动修复问题...
  🔄 重新运行测试...
  ✅ 全部测试通过

[阶段 4/5] 🔍 代码审查
  🔄 检查代码质量...
  🔄 检查安全问题...
  🔄 检查性能问题...
  ✅ 审查通过

[阶段 5/5] 📝 生成提交信息
  ✅ 提交信息已生成
```

**错误恢复**：
- 测试失败：自动修复，最多重试 3 次
- 编译错误：分析错误，自动修复
- Lint 问题：自动运行 fix
- 超过 3 次失败：暂停并询问用户

---

### 阶段 3: 完成汇报（自动执行）

**展示格式**：
```
═══════════════════════════════════════════════════
✅ 全自动开发任务完成

📋 功能名称：[功能名称]

📁 修改的文件：
  新增:
    • src/components/Login.tsx - 登录组件
    • src/api/auth.ts - 认证 API
    • src/types/user.ts - 用户类型定义

  修改:
    • src/App.tsx - 添加路由
    • src/api/index.ts - 导出认证 API

🧪 测试结果：
  ✅ 单元测试: 15/15 通过
  ✅ 集成测试: 3/3 通过
  ✅ Lint 检查: 通过
  ✅ 代码审查: 无问题

📝 提交信息：
  feat: implement user authentication system

  - Add login and registration components
  - Implement JWT-based authentication
  - Add user session management
  - Add password reset functionality

  Generated with Claude Code
  Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>

⏱️  总耗时: 约 X 分钟

📊 任务完成情况：
  ✅ 阶段1 (准备): 3/3 完成
  ✅ 阶段2 (开发): 8/8 完成
  ✅ 阶段3 (测试): 2/2 完成
  ✅ 阶段4 (发布): 1/1 完成

⚠️  注意事项：
  • [如有需要用户注意的事项]
  • [配置或环境变量需要更新]

📄 文档：
  • REQUIREMENTS.md - 需求文档（已完成）
  • TASK_LIST.md - 任务清单（全部完成）

下一步：
  • 运行 "git status" 查看变更
  • 运行测试确保一切正常
  • 准备好后可以 push 到远程仓库

═══════════════════════════════════════════════════
```

**清理工作**：
```
删除 .claude-fulldev.json 进度文件
保留 REQUIREMENTS.md 和 TASK_LIST.md 作为文档
```

---

## 触发方式

### 完整流程
```bash
# 基本触发
"全自动开发：[需求描述]"
"自动完成功能：[需求描述]"
"从需求到代码：[需求描述]"

# 示例
"全自动开发：实现用户登录注册功能"
"自动完成功能：添加购物车和订单管理"
"从需求到代码：搭建博客评论系统"
```

### 只生成需求文档（不开发）
```bash
"只生成需求文档：[需求描述]"
"需求分析：[需求描述]"
```

### 从需求文档开始开发
```bash
"根据 REQUIREMENTS.md 开始开发"
"继续开发"  # 如果已有需求文档
```

---

## 进度记录与恢复机制

### 1. 进度文件（.claude-fulldev.json）

详细记录整个工作流的执行状态：

```json
{
  "version": "2.0",
  "workflow": "full-auto-development",
  "feature": "用户登录注册系统",
  "started_at": "2024-01-01T10:00:00Z",
  "updated_at": "2024-01-01T10:25:30Z",

  "phases": [
    {
      "name": "requirements",
      "status": "completed",
      "started_at": "2024-01-01T10:00:00Z",
      "completed_at": "2024-01-01T10:05:00Z",
      "duration_seconds": 300,
      "checkpoints": [
        {
          "id": "requirements_generated",
          "timestamp": "2024-01-01T10:03:00Z",
          "description": "需求文档生成完成"
        },
        {
          "id": "tasks_decomposed",
          "timestamp": "2024-01-01T10:05:00Z",
          "description": "任务拆解完成"
        }
      ],
      "outputs": {
        "requirements_doc": "REQUIREMENTS.md",
        "task_list": "TASK_LIST.md"
      }
    },
    {
      "name": "confirmation",
      "status": "completed",
      "user_confirmed": true,
      "confirmed_at": "2024-01-01T10:08:00Z",
      "modifications": [
        {
          "timestamp": "2024-01-01T10:06:00Z",
          "action": "修改技术方案",
          "details": "用户要求改用 PostgreSQL"
        }
      ]
    },
    {
      "name": "development",
      "status": "in_progress",
      "started_at": "2024-01-01T10:08:00Z",
      "current_substage": "testing",
      "autonomous_dev_progress": {
        "current_stage": 3,
        "total_stages": 5,
        "stage_name": "测试验证",
        "tasks_completed": 8,
        "tasks_total": 14,
        "tests_passed": 12,
        "tests_failed": 2,
        "retry_count": 1
      },
      "checkpoints": [
        {
          "id": "code_implementation_done",
          "timestamp": "2024-01-01T10:20:00Z",
          "description": "代码实现完成",
          "can_resume_from": true
        }
      ]
    }
  ],

  "current_phase": {
    "name": "development",
    "status": "in_progress",
    "progress": "运行集成测试 (5/8 文件)"
  },

  "files_generated": [
    {
      "path": "REQUIREMENTS.md",
      "phase": "requirements",
      "timestamp": "2024-01-01T10:03:00Z",
      "status": "final"
    },
    {
      "path": "TASK_LIST.md",
      "phase": "requirements",
      "timestamp": "2024-01-01T10:05:00Z",
      "status": "final"
    },
    {
      "path": ".claude-dev.log",
      "phase": "development",
      "timestamp": "2024-01-01T10:08:00Z",
      "status": "updating"
    }
  ],

  "files_modified": [
    {
      "path": "src/components/Login.tsx",
      "action": "created",
      "phase": "development",
      "timestamp": "2024-01-01T10:12:00Z",
      "lines": 45
    },
    {
      "path": "src/api/auth.ts",
      "action": "created",
      "phase": "development",
      "timestamp": "2024-01-01T10:15:00Z",
      "lines": 120
    },
    {
      "path": "src/App.tsx",
      "action": "modified",
      "phase": "development",
      "timestamp": "2024-01-01T10:18:00Z",
      "lines_added": 15
    }
  ],

  "errors": [
    {
      "phase": "development",
      "stage": "testing",
      "timestamp": "2024-01-01T10:22:00Z",
      "error": "测试失败：login.test.ts",
      "details": "TypeError: Cannot read property 'email' of undefined",
      "fix_attempted": "添加了 null 检查",
      "resolved": true,
      "resolution_time": "2024-01-01T10:23:30Z"
    }
  ],

  "metrics": {
    "total_duration_seconds": 1530,
    "requirements_phase_seconds": 300,
    "confirmation_phase_seconds": 180,
    "development_phase_seconds": 1050,
    "files_created": 5,
    "files_modified": 3,
    "total_lines_written": 580,
    "tests_written": 15,
    "tests_passed": 12,
    "errors_fixed": 3,
    "user_interventions": 1
  },

  "next_action": "修复失败的集成测试，然后继续代码审查阶段"
}
```

### 2. 执行日志（.claude-dev.log）

包含完整工作流的详细日志：

```
[2024-01-01 10:00:00] [WORKFLOW] 开始全自动开发工作流
[2024-01-01 10:00:00] [INFO] 功能: 实现用户登录注册系统

[2024-01-01 10:00:01] [PHASE] 阶段 1/3: 需求分析
[2024-01-01 10:00:01] [INFO] 使用 Skill: requirements-doc
[2024-01-01 10:00:05] [ACTION] 分析需求关键点...
[2024-01-01 10:00:30] [ACTION] 检测项目技术栈: React + Node.js + PostgreSQL
[2024-01-01 10:01:00] [ACTION] 生成需求文档 REQUIREMENTS.md...
[2024-01-01 10:03:00] [SUCCESS] 需求文档生成完成 (11 章节)
[2024-01-01 10:03:00] [CHECKPOINT] requirements_generated
[2024-01-01 10:03:01] [ACTION] 拆解任务到 TASK_LIST.md...
[2024-01-01 10:05:00] [SUCCESS] 任务拆解完成 (14 任务, 4 阶段)
[2024-01-01 10:05:00] [CHECKPOINT] tasks_decomposed
[2024-01-01 10:05:00] [SUCCESS] 阶段 1 完成 (耗时: 5m)

[2024-01-01 10:05:01] [PHASE] 确认检查点 (等待用户)
[2024-01-01 10:05:01] [INFO] 展示需求文档和任务列表摘要
[2024-01-01 10:06:00] [USER] 用户请求: "修改技术方案"
[2024-01-01 10:06:05] [ACTION] 重新生成技术方案章节...
[2024-01-01 10:07:00] [SUCCESS] 技术方案已更新
[2024-01-01 10:07:01] [INFO] 再次展示确认信息
[2024-01-01 10:08:00] [USER] 用户确认: "继续开发"
[2024-01-01 10:08:00] [CHECKPOINT] user_confirmed

[2024-01-01 10:08:01] [PHASE] 阶段 2/3: 自动化开发
[2024-01-01 10:08:01] [INFO] 使用 Skill: autonomous-dev
[2024-01-01 10:08:05] [SUBSTAGE] 开发阶段 1/5: 需求分析（跳过）
[2024-01-01 10:08:05] [SUBSTAGE] 开发阶段 2/5: 代码实现
[2024-01-01 10:08:10] [ACTION] 从 TASK_LIST.md 加载任务...
[2024-01-01 10:08:15] [INFO] 加载 14 个任务
[2024-01-01 10:08:20] [ACTION] 任务 1/14: 创建用户类型定义
[2024-01-01 10:10:00] [SUCCESS] 创建 src/types/user.ts (28 lines)
[2024-01-01 10:10:01] [ACTION] 任务 2/14: 实现登录组件
[2024-01-01 10:12:00] [SUCCESS] 创建 src/components/Login.tsx (45 lines)
... (继续所有任务)
[2024-01-01 10:20:00] [SUCCESS] 代码实现完成 (8 任务, 8 文件)
[2024-01-01 10:20:00] [CHECKPOINT] code_implementation_done

[2024-01-01 10:20:01] [SUBSTAGE] 开发阶段 3/5: 测试验证
[2024-01-01 10:20:05] [ACTION] 运行测试: npm test
[2024-01-01 10:21:00] [WARN] 测试失败: 2/14 失败
[2024-01-01 10:21:01] [ERROR] login.test.ts:25 - TypeError: Cannot read property 'email' of undefined
[2024-01-01 10:21:30] [ACTION] 修复: 添加 null 检查
[2024-01-01 10:22:00] [ACTION] 重新运行测试 (重试 1/3)
[2024-01-01 10:23:00] [SUCCESS] 测试通过: 14/14
[2024-01-01 10:23:00] [CHECKPOINT] testing_passed

[2024-01-01 10:23:01] [SUBSTAGE] 开发阶段 4/5: 代码审查
... (继续)
```

### 3. 中断恢复场景

**场景 1：需求分析阶段中断（等待用户确认）**
```
用户重连: "继续" / "resume"

AI 响应：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔄 检测到未完成的全自动开发任务

功能: 实现用户登录注册系统
工作流: full-auto-development
状态: 等待用户确认

当前阶段: 需求分析完成，等待确认
开始时间: 2024-01-01 10:00:00
已运行: 5 分钟

已完成:
  ✅ 阶段 1: 需求分析 (5m)
     - 生成 REQUIREMENTS.md
     - 生成 TASK_LIST.md
     - 识别 14 个任务

等待确认:
  ⏸️  阶段 2: 用户确认需求文档

待执行:
  ⬜ 阶段 3: 自动化开发 (预估 20-30m)

生成的文档:
  📄 REQUIREMENTS.md
  📋 TASK_LIST.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

选择操作:
  1️⃣  "查看需求文档" - 查看文档摘要
  2️⃣  "继续开发" - 确认需求，开始开发
  3️⃣  "修改[章节]" - 调整特定部分
  4️⃣  "重新生成" - 重新生成需求文档
  5️⃣  "取消" - 终止任务
```

**场景 2：开发阶段中断**
```
用户重连: "继续"

AI 响应：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔄 检测到未完成的全自动开发任务

功能: 实现用户登录注册系统
状态: 开发进行中

阶段进度:
  ✅ 阶段 1: 需求分析 (完成, 5m)
  ✅ 阶段 2: 用户确认 (完成)
  🔄 阶段 3: 自动化开发 (进行中, 已运行 17m)

开发子阶段进度:
  ✅ 1. 需求分析 (跳过)
  ✅ 2. 代码实现 (完成, 8 任务)
  🔄 3. 测试验证 (进行中)
     - 当前: 运行集成测试
     - 进度: 5/8 个测试文件
     - 通过: 12 个测试
     - 失败: 2 个测试
     - 重试: 1/3
  ⬜ 4. 代码审查 (待开始)
  ⬜ 5. 提交代码 (待开始)

已修改文件:
  新增: 5 个文件 (580 行)
  修改: 3 个文件

上次操作: 2024-01-01 10:25:30
下一步: 修复失败的集成测试

最近日志:
  10:23:00 ✅ 单元测试全部通过
  10:23:30 🔄 开始集成测试
  10:25:00 ⚠️  2 个集成测试失败
  10:25:30 🔄 分析失败原因...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

选择操作:
  1️⃣  "继续" - 从中断点继续
  2️⃣  "查看日志" - 查看详细日志
  3️⃣  "查看错误" - 查看测试失败详情
  4️⃣  "从检查点恢复" - 列出可用检查点
  5️⃣  "取消" - 终止任务
```

**场景 3：错误状态中断**
```
AI 响应：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️  检测到任务在错误状态中断

功能: 实现用户登录注册系统
状态: 测试失败 (重试用尽)

问题详情:
  阶段: 自动化开发 - 测试验证
  错误: 集成测试持续失败
  时间: 2024-01-01 10:30:00

  失败测试:
    • auth.integration.test.ts:45
      API endpoint /api/login 返回 500
    • session.integration.test.ts:30
      Session 创建失败

已尝试的修复 (3 次):
  1. ❌ 添加错误处理 (10:27:00)
  2. ❌ 修复数据库连接 (10:28:30)
  3. ❌ 更新 API 路由 (10:29:45)

检查点:
  最近可用检查点: code_implementation_done
  时间: 2024-01-01 10:20:00
  状态: 代码实现完成，准备测试

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

建议操作:
  1️⃣  "查看完整日志" - 查看详细执行日志
  2️⃣  "查看代码" - 查看相关文件
  3️⃣  "手动修复后继续" - 你修复后 AI 继续
  4️⃣  "从检查点重试" - 回到代码实现完成时
  5️⃣  "跳过测试" - 跳过测试继续下一阶段
  6️⃣  "取消任务" - 终止并保留文件
```

### 4. 检查点管理

**可用检查点**：
1. `requirements_generated` - 需求文档生成完成
2. `tasks_decomposed` - 任务拆解完成
3. `user_confirmed` - 用户确认完成
4. `code_implementation_done` - 代码实现完成
5. `testing_passed` - 测试通过
6. `code_review_done` - 代码审查完成

**从检查点恢复**：
```
用户: "查看检查点"

AI:
📍 可用检查点

1. requirements_generated
   时间: 10:03:00
   描述: 需求文档生成完成
   可恢复: ✅

2. tasks_decomposed
   时间: 10:05:00
   描述: 任务拆解完成
   可恢复: ✅

3. user_confirmed
   时间: 10:08:00
   描述: 用户确认完成，准备开发
   可恢复: ✅

4. code_implementation_done
   时间: 10:20:00
   描述: 代码实现完成，准备测试
   可恢复: ✅

输入"从检查点[编号]恢复"，例如: "从检查点4恢复"
```

### 5. 进度查询

```
用户: "当前进度" / "status"

AI:
📊 全自动开发工作流 - 执行状态

功能: 实现用户登录注册系统
总进度: ▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░  60%

阶段进度:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
阶段 1: 需求分析     ✅ 完成 (5m)
阶段 2: 用户确认     ✅ 完成 (3m)
阶段 3: 自动化开发   🔄 进行中 (已运行 17m)
  └─ 子阶段 3/5: 测试验证
     ▓▓▓▓▓▓░░░░  62%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

当前任务: 运行集成测试 (5/8 文件)
测试状态: 12 通过, 2 失败
重试次数: 1/3

文件状态:
  新增: 5 文件 (580 行代码)
  修改: 3 文件
  测试: 15 个测试用例

最近操作:
  10:25:30 🔄 运行集成测试
  10:24:00 ✅ 单元测试通过
  10:23:00 🔧 修复 null 检查

预估剩余: 约 15-20 分钟
```

### 6. 手动介入

**场景：AI 暂停请求帮助**
```
AI: ⚠️  连续失败 3 次，需要人工介入

问题: 集成测试失败
文件: tests/auth.integration.test.ts
错误: API返回 500

已尝试:
  • 添加错误处理
  • 检查数据库连接
  • 更新 API 路由

建议检查:
  • 数据库配置是否正确
  • API 服务是否启动
  • 环境变量是否设置

修复后输入"已修复，继续"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

用户: [手动修复问题]
用户: "已修复，继续"

AI: ✅ 收到，从测试阶段继续...

[阶段 3/5] 🧪 重新运行测试...
🔄 运行集成测试...
✅ 全部测试通过！

继续下一阶段...
```

---

## 配置选项

可在触发时指定参数：

```bash
# 跳过测试阶段
"全自动开发：[需求]，跳过测试"

# 只生成文档不开发
"全自动开发：[需求]，只生成文档"

# 详细模式（更多输出）
"全自动开发：[需求]，详细模式"

# 静默模式（减少输出）
"全自动开发：[需求]，静默模式"
```

---

## 工作流检查清单

### 需求分析阶段
- [x] 需求文档结构完整
- [x] 验收标准可测试
- [x] 功能模块划分清晰
- [x] 技术方案合理
- [x] 任务拆解合理（2-4小时粒度）
- [x] 依赖关系明确
- [x] 风险识别充分

### 确认检查点
- [x] 用户已审查需求文档
- [x] 用户已确认功能模块
- [x] 用户已验证任务列表
- [x] 用户明确同意开始开发

### 开发阶段
- [x] 代码实现完成
- [x] 单元测试通过
- [x] 集成测试通过
- [x] Lint 检查通过
- [x] 代码审查通过

### 完成阶段
- [x] 所有任务完成
- [x] 文档已更新
- [x] 提交信息已生成
- [x] 用户已知晓注意事项

---

## 最佳实践

### 需求描述
```
好的需求描述（清晰具体）：
✅ "实现用户登录注册功能，支持邮箱和手机号，包含找回密码"
✅ "添加商品评论系统，支持评分、评论、图片上传、审核"
✅ "实现实时聊天功能，支持文字、图片、在线状态显示"

不够清晰的描述：
❌ "做个登录"
❌ "加个评论"
❌ "搞个聊天"
```

### 确认环节
- 仔细审查功能模块划分
- 检查任务拆解的合理性
- 确认技术方案符合项目需求
- 注意风险提示

### 开发过程
- AI 会自动处理大部分错误
- 如果连续失败 3 次会暂停并询问
- 可以随时中断，进度会保存

---

## 相关 Skills

| Skill | 阶段 | 作用 |
|-------|------|------|
| `requirements-doc` | 需求分析 | 生成需求文档和任务列表 |
| `task-planner` | 需求分析 | 辅助任务拆解和规划 |
| `autonomous-dev` | 开发 | 自动化开发实现 |
| `auto-code-pipeline` | 开发 | 自动化测试和检查 |
| `code-reviewer` | 开发 | 代码质量审查 |

---

## 与其他 Workflow 的区别

| Workflow | 特点 | 适用场景 |
|----------|------|----------|
| `full-auto-development` | 完整自动化，需求→代码 | 从零开始的新功能 |
| `feature-development` | 手动开发，AI 辅助 | 需要精细控制的开发 |
| `autonomous-dev` (Skill) | 纯自动开发，无需求阶段 | 需求已明确的开发 |

---

## 故障排除

### 问题 1: 需求文档生成不符合预期
**解决**：
- 说"修改[章节名]"重新生成
- 提供更详细的需求描述
- 说"详细说明[部分]"获取更多信息

### 问题 2: 任务拆解太粗或太细
**解决**：
- 说"修改任务列表"
- 说"任务拆分得更细一些"
- 说"合并一些小任务"

### 问题 3: 开发阶段连续失败
**解决**：
- AI 会自动暂停并报告问题
- 检查错误信息
- 可能需要手动调整需求或技术方案

### 问题 4: 会话中断
**解决**：
- 重新连接后说"继续"
- AI 会从上次进度继续

---

## 示例：完整流程演示

```
用户: 全自动开发：实现用户登录注册功能

AI: 开始需求分析...

    [阶段 1/3] 分析需求...
    ✅ 识别核心功能：登录、注册、密码管理
    ✅ 检测技术栈：React + Node.js + PostgreSQL

    [阶段 2/3] 生成需求文档...
    ✅ REQUIREMENTS.md 已创建

    [阶段 3/3] 拆解任务...
    ✅ TASK_LIST.md 已创建

    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    📋 需求文档已生成

    功能概述：
      实现用户登录注册系统，支持邮箱注册、登录、密码找回功能

    功能模块划分：
      📱 前端模块：
        • 登录组件 (Login.tsx)
        • 注册组件 (Register.tsx)
        • 密码重置组件 (ResetPassword.tsx)
        • 表单验证工具 (validation.ts)

      🔧 后端模块：
        • 认证 API (/api/auth)
        • 用户管理 (/api/users)
        • 邮件服务 (email.service.ts)
        • JWT 中间件 (auth.middleware.ts)

      🗄️  数据库模块：
        • users 表（id, email, password_hash, created_at）
        • sessions 表（id, user_id, token, expires_at）

    任务拆解：
      阶段1 (准备): 3 个任务
      阶段2 (开发): 8 个任务
      阶段3 (测试): 2 个任务
      阶段4 (发布): 1 个任务

      总计: 14 个任务
      预估工作量: 2-3 天

    技术方案：
      • React Hook Form + Zod 表单验证
      • JWT 认证机制
      • bcrypt 密码加密
      • nodemailer 邮件发送

    文档位置：
      📄 REQUIREMENTS.md
      📋 TASK_LIST.md

    请审查后输入"继续开发"开始实现
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

用户: 继续开发

AI: ✅ 用户已确认，开始自动化开发...

    [阶段 1/5] 📋 读取任务列表
    ✅ 加载 14 个任务

    [阶段 2/5] 💻 代码实现
    🔄 任务 1: 创建用户类型定义
    ✅ 已创建 src/types/user.ts

    🔄 任务 2: 实现登录组件
    ✅ 已创建 src/components/Login.tsx

    🔄 任务 3: 实现注册组件
    ✅ 已创建 src/components/Register.tsx

    ... (继续所有任务)

    [阶段 3/5] 🧪 测试验证
    🔄 运行测试...
    ✅ 15/15 测试通过

    [阶段 4/5] 🔍 代码审查
    ✅ 无问题发现

    [阶段 5/5] 📝 生成提交
    ✅ 完成

    ═══════════════════════════════════════
    ✅ 全自动开发任务完成

    功能名称：用户登录注册系统

    修改的文件：
      新增: 8 个文件
      修改: 3 个文件

    测试结果：✅ 全部通过

    ═══════════════════════════════════════
```
